# dns-allowlists

Централизованные DNS allowlist’ы для локальной инфраструктуры (AdGuard Home и аналоги).

## Назначение

Репозиторий содержит списки доменов, которые должны быть **разрешены** (не блокироваться) при использовании DNS-фильтрации и чёрных списков.

Формат списков: **один домен на строку** (FQDN), без AdBlock-синтаксиса.

Примеры корректных строк:
- `example.com`
- `api.example.com`

Примеры некорректных строк (их быть не должно):
- `@@||example.com^`
- `||example.com^`
- `example.com^$client='...'`
- `https://example.com/path`

## Файлы

- `global.txt` — глобальный allowlist (домен разрешён для всех клиентов).
- `jellyfin.txt` — allowlist для клиента/сервиса Jellyfin (IPTV/CDN/внешние API).
- `ps5` — allowlist для PlayStation 5 (авторизация/сервисы/загрузки).
- `smb` — allowlist для SMB/torrent-клиента (трекеры и инфраструктура).

Примечание: файлы `ps5` и `smb` без расширения — это допустимо, но для читаемости можно переименовать в `ps5.txt` и `smb.txt`.

## Использование в AdGuard Home

### Глобальный allowlist
AdGuard Home → **Фильтры** → **Белый список**:
- импортировать содержимое `global.txt` (вставкой или подключением локального файла).

### Allowlist для конкретного клиента
AdGuard Home → **Настройки** → **Клиенты** → выбрать клиента → **Белый список**:
- импортировать содержимое соответствующего файла (`jellyfin.txt`, `ps5`, `smb`).

## Рекомендации по сопровождению

- Не добавлять в allowlist блокирующие правила и модификаторы AdBlock.
- Держать списки минимальными: добавлять только то, что реально ломается из-за блоклистов.
- После изменений проверять, что строки валидны (см. “Проверка” ниже).

## Проверка (локально)

Проверка на “мусорный” AdBlock-синтаксис и URL:
- `@@`, `||`, `^`, `$`, `http://`, `https://`

Также рекомендуется:
- удалить пустые строки
- удалить дубли
- привести домены к нижнему регистру
